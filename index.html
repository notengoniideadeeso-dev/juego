function siguientePregunta() {
  document.getElementById("mensaje").innerText = "";
  const i = Math.floor(Math.random() * radicales.length);
  actual = radicales[i];

  const colores = {
    es: "#fffbe6",
    en: "#e6f7ff",
    fr: "#f9fbe7"
  };

  const contenedor = document.getElementById("opciones");
  contenedor.innerHTML = "";
  document.getElementById("pregunta").innerHTML = `<h2>¿Qué significa el radical <span style="font-size: 24px;">${actual.radical}</span>?</h2>`;

  idiomas.forEach(idioma => {
    const grupo = document.createElement("div");
    grupo.style.backgroundColor = colores[idioma] || "#f0f0f0";
    grupo.style.padding = "10px";
    grupo.style.marginBottom = "10px";
    grupo.style.borderRadius = "6px";

    const opciones = new Set([actual.name[idioma]]);
    while (opciones.size < numFalsas + 1) {
      const aleatorio = radicales[Math.floor(Math.random() * radicales.length)];
      if (aleatorio.name[idioma] !== actual.name[idioma]) {
        opciones.add(aleatorio.name[idioma]);
      }
    }

    const mezcladas = Array.from(opciones).sort(() => Math.random() - 0.5);

    const titulo = document.createElement("h3");
    titulo.innerText = `Opciones en ${idioma.toUpperCase()}`;
    grupo.appendChild(titulo);

    mezcladas.forEach(opcion => {
      const btn = document.createElement("button");
      btn.innerText = opcion;
      btn.style.display = "block";
      btn.style.margin = "5px auto";
      btn.style.width = "90%";
      btn.onclick = () => verificar(opcion, idioma);
      grupo.appendChild(btn);
    });

    contenedor.appendChild(grupo);
  });
}

function verificar(seleccion, idioma) {
  const esCorrecta = seleccion === actual.name[idioma];
  if (esCorrecta) {
    document.getElementById("mensaje").innerText = "✅ ¡Correcto!";
    setTimeout(siguientePregunta, 1500);
  } else {
    const radicalErroneo = radicales.find(r => idiomas.some(id => r.name[id] === seleccion));
    if (radicalErroneo) {
      const traducciones = idiomas.map(id => `${id}: "${radicalErroneo.name[id]}"`).join(" | ");
      document.getElementById("mensaje").innerText =
        `❌ Incorrecto. El radical ${radicalErroneo.radical} significa: ${traducciones}`;
    } else {
      document.getElementById("mensaje").innerText = "❌ Incorrecto. No se encontró el significado.";
    }
  }
}
